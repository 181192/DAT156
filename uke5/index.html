<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Uke 5 - JWT | DAT156</title>
    <meta name="description" content="Praksis i arbeidslivet for data @ stacc">
    
    
    <link rel="preload" href="/DAT156/assets/css/0.styles.3fd9cd7c.css" as="style"><link rel="preload" href="/DAT156/assets/js/app.c929a9f7.js" as="script"><link rel="preload" href="/DAT156/assets/js/5.89c3955b.js" as="script"><link rel="prefetch" href="/DAT156/assets/js/10.b52db6fe.js"><link rel="prefetch" href="/DAT156/assets/js/2.36274466.js"><link rel="prefetch" href="/DAT156/assets/js/3.b6bff37c.js"><link rel="prefetch" href="/DAT156/assets/js/4.45b8e958.js"><link rel="prefetch" href="/DAT156/assets/js/6.443e87b5.js"><link rel="prefetch" href="/DAT156/assets/js/7.66a91300.js"><link rel="prefetch" href="/DAT156/assets/js/8.b3f987a9.js"><link rel="prefetch" href="/DAT156/assets/js/9.ff098acb.js">
    <link rel="stylesheet" href="/DAT156/assets/css/0.styles.3fd9cd7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/DAT156/" class="home-link router-link-active"><!----> <span class="site-name">DAT156</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/DAT156/" class="nav-link">Hjem</a></div><div class="nav-item"><a href="https://github.com/181192/DAT156" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://stacc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stacc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/DAT156/" class="nav-link">Hjem</a></div><div class="nav-item"><a href="https://github.com/181192/DAT156" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://stacc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Stacc
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/DAT156/uke5/" class="active sidebar-link">Uke 5 - JWT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DAT156/uke5/#fredag" class="sidebar-link">Fredag</a></li><li class="sidebar-sub-header"><a href="/DAT156/uke5/#onsdag-og-torsdag" class="sidebar-link">Onsdag og Torsdag</a></li><li class="sidebar-sub-header"><a href="/DAT156/uke5/#tirsdag" class="sidebar-link">Tirsdag</a></li><li class="sidebar-sub-header"><a href="/DAT156/uke5/#mandag" class="sidebar-link">Mandag</a></li></ul></li><li><a href="/DAT156/uke4/" class="sidebar-link">Uke 4 - Dypt inn i skyene</a></li><li><a href="/DAT156/uke3/" class="sidebar-link">Uke 3 - Veien mot skyene</a></li><li><a href="/DAT156/uke2/" class="sidebar-link">Uke 2 - Postman, Azure og Kubernetes</a></li><li><a href="/DAT156/uke1/" class="sidebar-link">Uke 1 - Vue og AngularJS</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="uke-5-jwt"><a href="#uke-5-jwt" aria-hidden="true" class="header-anchor">#</a> Uke 5 - JWT</h1> <div class="tip custom-block"><p class="custom-block-title">Timer</p> <p>Denne uken: 36</p> <p><strong>Totalt: 177</strong> 🎉</p></div> <h2 id="fredag"><a href="#fredag" aria-hidden="true" class="header-anchor">#</a> Fredag</h2> <p>Fredag ble brukt til å være med en av testerne på teamet mitt til en gjennomgang av Kreditt løsningen. Siden jeg nå jobber på <em>KredittTeam</em> var det på tide å få en gjennomgang av hvordan løsningen fungerer. Jeg har jo tidligere holdt på med andre prosjekter som ikke er så relevant i forhold til det <em>KredittTeam</em> faktisk jobber med. Vi har nettopp tatt en <em>cut fra master</em> hvor vi skal levere en ny versjon til Eika. Det er denne som nå skal regresjonstestes, jeg holder på med en oppgave hvor det er en merkelig bug. Men på grunn av jeg ikke har domene kunnskapen om løsningen enda har det vært vanskelig, derfor slenger jeg meg med når en av testerne på teamet skal gå i gang.</p> <p>I løpet av en liten halvtime når jeg tar trykket litt rundt og blitt forklart hva dette handler om, finner jeg i tillegg til den buggen jeg jobber med, fire andre problemer som blir til to saker. Så her blir det mer jobb til mandag.</p> <h2 id="onsdag-og-torsdag"><a href="#onsdag-og-torsdag" aria-hidden="true" class="header-anchor">#</a> Onsdag og Torsdag</h2> <p>Jeg har jobbet med å få satt opp pipeline til JWT prosjeket. Prosjektet består av ett webprosjekt (war) og fire bibliotek. Webprosjektet skal bygges i Jenkins, også skal Bitbucket Pipeline lytte på en tag og deretter bygge Docker image og pushe det til Azure Container Registry. Bibliotekene skal bli publisert til Azure Artifacts på hver commit.</p> <p><img src="/DAT156/assets/img/comp.e9815ab5.png" alt="comp"></p> <p>Siden dette er ett monoprosjekt. Er det ønskelig at kun de modulene som blir påvirket/ har en endring, er de som blir oppdatert. Så her måtte det litt bash programmering til.</p> <p>Ett fint eksempel på å sjekke om det er gjort noe endringer i en mappe eller en fil mellom de to siste commitene, og kun printe ut filnavnene, ser slik ut:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> <span class="token function">diff</span> --name-only --diff-filter<span class="token operator">=</span>AMDR HEAD^ HEAD <span class="token operator">&lt;</span>fil eller mappenavn<span class="token operator">&gt;</span>
</code></pre></div><p>Også måtte jeg også finne alle undermapper med en <code>pom.xml</code> fil, som jeg kan putte inn i funksjonen over:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">find</span> <span class="token keyword">.</span> -name pom.xml -print0 <span class="token operator">|</span> <span class="token function">xargs</span> -0 -n1 <span class="token function">dirname</span> <span class="token function">rm</span> <span class="token operator">|</span> <span class="token function">sort</span> --unique <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&quot;s|^\./||&quot;</span> <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">'\n'</span> <span class="token string">' '</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^.\{2\}//'</span>
</code></pre></div><p>Kommandoen over vil returnere en streng med alle undermapper som inneholder en <code>pom.xml</code> fil, hvor de er skilt med mellomrom. Det funker bra for en tabell i bash blir elementene skilt med mellomrom <code>array=(el1 el2 el3 el4)</code></p> <p>Jeg gjorde også en endring med i stedet for å endre vår Parent POM til å samhandle med Azure (som gjør at vi må endre alle gamle moduler). Lager jeg nå en Azure POM, som er konfigurert til å snakke med Azure Artifacts, og oppdaterer heller de bibliotekene / modulene som skal bli flyttet med denne nye Parent POM'en.</p> <h2 id="tirsdag"><a href="#tirsdag" aria-hidden="true" class="header-anchor">#</a> Tirsdag</h2> <p>Litt diverse aktiviteter i dag, men hovedtrekkene var at <em>Veien mot Skyene</em> prosjetet er satt litt på is. Jeg begynte å sette meg inn i ett nytt prosjekt kalt <em>JWT - Sikkerhet</em>, som handler om å bytte ut en eldre selvutviklet sikkerhetsløsning med OpenID Connect.</p> <p>OpenID Connect er ett lettvektig identitets lag over OAuth 2.0 protokollen. Dette er har vi implementert med Spring Boot 2. OAuth 2.0 bruker <a href="https://jwt.io/" target="_blank" rel="noopener noreferrer">JSON Web Tokens<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (JWT) som er en åpen industri standard for å representere krav sikkert mellom to parter.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ jwt decode eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c

Token header
------------
<span class="token punctuation">{</span>
  <span class="token string">&quot;typ&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;JWT&quot;</span>,
  <span class="token string">&quot;alg&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;HS256&quot;</span>
<span class="token punctuation">}</span>

Token claims
------------
<span class="token punctuation">{</span>
  <span class="token string">&quot;iat&quot;</span><span class="token keyword">:</span> 1516239022,
  <span class="token string">&quot;name&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;John Doe&quot;</span>,
  <span class="token string">&quot;sub&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;1234567890&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>En mer abstrakt oversikt over flyten gjennom en OAuth autentisering.</p> <p><img src="/DAT156/assets/img/oauth-abstract.398534a8.png" alt="oauth"></p> <p>Jeg brukte dagen for å sette opp prosjeket lokalt på maskinen, og begynne å sette opp Bitbucket Pipeline så artefaktene kan bli deployet til Azure Artifacts. Hvor mye jeg kommer til å jobbe med dette prosjeket er litt usikkert, siden prosjektet er i sluttfasen.</p> <h2 id="mandag"><a href="#mandag" aria-hidden="true" class="header-anchor">#</a> Mandag</h2> <p>I dag fikk endelig utviklerne tilgang til Azure Artifacts og kan begynne å bruke de nyeste versjonen av bibliotekene som blir bygget ut til Azure Artifacs via Bitbucket Pipelines.</p> <p>Jeg skulle egentlig ha ett møte med arkitektene om <em>Veien til Skyen</em> prosjektet. Nå er det på tide å få svar på en del viktige spørsmål rundt Kubernetes i produksjon, hvordan vi skal håndtere deployments og releases, hvilke veier ønsker vi å gå videre, hvilke milepæler har vi nådd, hvilke moduler skal vi velge som neste til å bli deployet til Kubernetes osv (ulik kompleksitet, avhengingheter, database tilkobling osv...).</p> <p>Det møtet ble det ikke noe av på grunn av andre ting som haster mer i teamet. Derfor brukte jeg dagen på å gjøre litt research rundt bacheloroppgaven. Jeg prøvde å grave frem gammel dokumentasjon som brukerhistorier, illustrasjoner og funksjonelle krav til en klient som vi kaller &quot;Planer&quot;. En del av innholdet til &quot;Planer&quot; klienten er sentral i bacheloroppgaven, så det hadde vært greit for både meg og de andre i gruppen å få litt bakgrunnstoff.</p> <p>På slutten av dagen hadde jeg ett møte med bachelorgruppen min, Preben Haukebø og Arne Flatekval. Formålet med møte var å få spesifisert nøyere hva vi ønsker å lage, og de tekniske utfordringene vi står ovenfor.</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Sist oppdatert: </span> <span class="time">2/3/2019, 1:21:27 PM</span></div></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/DAT156/uke4/">
          Uke 4 - Dypt inn i skyene
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/DAT156/assets/js/app.c929a9f7.js" defer></script><script src="/DAT156/assets/js/5.89c3955b.js" defer></script>
  </body>
</html>
